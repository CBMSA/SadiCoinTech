<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SDC FSP Portal</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4 bg-dark text-light">

<h2>SDC FSP Portal â€” Africa Payments & FX</h2>

<!-- Network Operator Payments -->
<div class="card p-3 mb-3">
  <h5>African Mobile Money Payment</h5>

  <select id="country" class="form-control mb-1">
    <option value="ZA">South Africa</option>
    <option value="ZW">Zimbabwe</option>
    <option value="KE">Kenya</option>
    <option value="UG">Uganda</option>
    <option value="NG">Nigeria</option>
    <option value="GH">Ghana</option>
    <option value="TZ">Tanzania</option>
    <option value="RW">Rwanda</option>
  </select>

  <select id="network" class="form-control mb-1">
    <option value="mtn">MTN</option>
    <option value="vodacom">Vodacom</option>
    <option value="airtel">Airtel</option>
    <option value="orange">Orange</option>
    <option value="telkom">Telkom</option>
    <option value="cellc">Cell C</option>
    <option value="econet">Econet</option>
  </select>

  <input type="text" id="msisdn" class="form-control mb-1" placeholder="Phone Number">
  <input type="number" id="mobileAmount" class="form-control mb-1" placeholder="Amount">

  <button class="btn btn-success" onclick="mobileDeposit()">Deposit via Mobile Money</button>
  <button class="btn btn-warning" onclick="mobileWithdraw()">Withdraw to Mobile Money</button>

  <pre id="mobileMsg"></pre>
</div>

<!-- Live FX Rates -->
<div class="card p-3 mb-3">
  <h5>Live African FX Rates</h5>
  <button class="btn btn-info mb-2" onclick="getFXRates()">Fetch Live Rates</button>
  <pre id="fxRates"></pre>
</div>

<script>
const API_BASE = "/api";

// Mobile Money Deposit
async function mobileDeposit() {
  const country = document.getElementById('country').value;
  const network = document.getElementById('network').value;
  const msisdn = document.getElementById('msisdn').value;
  const amount = parseFloat(document.getElementById('mobileAmount').value);

  const res = await fetch(`${API_BASE}/africa/mobile-money`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ action: 'deposit', country, network, msisdn, amount })
  });

  const data = await res.json();
  document.getElementById('mobileMsg').innerText = JSON.stringify(data, null, 2);
}

// Mobile Money Withdraw
async function mobileWithdraw() {
  const country = document.getElementById('country').value;
  const network = document.getElementById('network').value;
  const msisdn = document.getElementById('msisdn').value;
  const amount = parseFloat(document.getElementById('mobileAmount').value);

  const res = await fetch(`${API_BASE}/africa/mobile-money`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ action: 'withdraw', country, network, msisdn, amount })
  });

  const data = await res.json();
  document.getElementById('mobileMsg').innerText = JSON.stringify(data, null, 2);
}

// Live FX Rates (e.g., EDOH or other aggregator)
async function getFXRates() {
  const res = await fetch(`${API_BASE}/africa/fx-rates`);
  const data = await res.json();
  document.getElementById('fxRates').innerText = JSON.stringify(data, null, 2);
}
</script>

</body>
</html>
